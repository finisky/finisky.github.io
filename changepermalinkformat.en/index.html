<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="oFhcvcGsjsTY5AFUaI-ezbn7-bel9NrdUNpeQfwZSwI">
  <meta name="msvalidate.01" content="F8E2F274161B653649F8818FD127CE87">
  <meta name="yandex-verification" content="ff1f79abcbf80d7e">
  <meta name="baidu-site-verification" content="XG2u6IqsZb">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"finisky.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.5.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>
<meta name="description" content="Recently I would like to simplify permanent link for each post. From: &#x2F;2021&#x2F;03&#x2F;21&#x2F;migrateopsmanager.en&#x2F; To: &#x2F;migrateopsmanager.en&#x2F; Shorter URL is more concise and readable, as the date string makes no">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo Change Permanent Link Format With Backward Compatibility">
<meta property="og:url" content="https://finisky.github.io/changepermalinkformat.en/index.html">
<meta property="og:site_name" content="Finisky Garden">
<meta property="og:description" content="Recently I would like to simplify permanent link for each post. From: &#x2F;2021&#x2F;03&#x2F;21&#x2F;migrateopsmanager.en&#x2F; To: &#x2F;migrateopsmanager.en&#x2F; Shorter URL is more concise and readable, as the date string makes no">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-06-14T17:13:10.000Z">
<meta property="article:modified_time" content="2022-05-13T15:58:38.000Z">
<meta property="article:author" content="finisky">
<meta property="article:tag" content="SEO">
<meta property="article:tag" content="Hexo">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://finisky.github.io/changepermalinkformat.en/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://finisky.github.io/changepermalinkformat.en/","path":"changepermalinkformat.en/","title":"Hexo Change Permanent Link Format With Backward Compatibility"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Hexo Change Permanent Link Format With Backward Compatibility | Finisky Garden</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-96909088-2"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-96909088-2","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>



<link rel="dns-prefetch" href="https://finiskycomments.vercel.app">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start --><script type="text/javascript"> function downloadJsAtOnload() { setTimeout(function downloadJs() { var element = document.createElement("script"); element.setAttribute("data-ad-client", "ca-pub-2660281922577700"); element.async = true; element.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"; document.body.appendChild(element); }, 5000); }; if (window.addEventListener) window.addEventListener("load", downloadJsAtOnload, false); else if (window.attachEvent) window.attachEvent("onload", downloadJsAtOnload); else window.onload = downloadJsAtOnload; </script><!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Finisky Garden</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Easy doesn't enter into grown-up life.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
        <li class="menu-item menu-item-nlp"><a href="/tags/NLP/" rel="section"><i class="fa fa-language fa-fw"></i>NLP</a></li>
        <li class="menu-item menu-item-machine-learning"><a href="/categories/Machine-Learning/" rel="section"><i class="fa fa-chart-area fa-fw"></i>Machine Learning</a></li>
        <li class="menu-item menu-item-mongodb"><a href="/categories/MongoDB/" rel="section"><i class="fas fa-database fa-fw"></i>MongoDB</a></li>
        <li class="menu-item menu-item-links-&-contacts"><a href="/links/" rel="section"><i class="fas fa-link fa-fw"></i>Links & Contacts</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#change-permanent-link-format-issue"><span class="nav-number">1.</span> <span class="nav-text">Change Permanent Link Format
Issue</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#new-post-new-permalink-format-implementation"><span class="nav-number">2.</span> <span class="nav-text">New Post New
Permalink Format Implementation</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#references"><span class="nav-number">3.</span> <span class="nav-text">References</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="finisky"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">finisky</p>
  <div class="site-description" itemprop="description">Easy doesn't enter into grown-up life.</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">162</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">59</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



          </div>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://finisky.github.io/changepermalinkformat.en/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="finisky">
      <meta itemprop="description" content="Easy doesn't enter into grown-up life.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Finisky Garden">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hexo Change Permanent Link Format With Backward Compatibility
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-06-15 01:13:10" itemprop="dateCreated datePublished" datetime="2021-06-15T01:13:10+08:00">2021-06-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2022-05-13 23:58:38" itemprop="dateModified" datetime="2022-05-13T23:58:38+08:00">2022-05-13</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Hexo/" itemprop="url" rel="index"><span itemprop="name">Hexo</span></a>
        </span>
    </span>

  
    <span id="/changepermalinkformat.en/" class="post-meta-item leancloud_visitors" data-flag-title="Hexo Change Permanent Link Format With Backward Compatibility" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="leancloud-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline: </span>
  
    <a title="waline" href="/changepermalinkformat.en/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/changepermalinkformat.en/" data-xid="/changepermalinkformat.en/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Recently I would like to simplify permanent link for each post.
From:</p>
<p><code>/2021/03/21/migrateopsmanager.en/</code></p>
<p>To:</p>
<p><code>/migrateopsmanager.en/</code></p>
<p>Shorter URL is more concise and readable, as the date string makes no
sense to users. But what's the meaning of URL backward
compatibility?</p>
<span id="more"></span>
<h1 id="change-permanent-link-format-issue">Change Permanent Link Format
Issue</h1>
<p>According to the <a
target="_blank" rel="noopener" href="https://hexo.io/docs/permalinks.html">official document</a>,
changing permalink format is pretty easy: just modify
<code>:year/:month/:day/:title/</code> to <code>:title/</code> would be
OK. However, the real problem is that all existing incoming links will
be invalid after this modification. Then the ranking of our site will be
affected which is unacceptable.</p>
<p>Unlike WordPress, it's hard to make a 301 redirect in Hexo. I worked
out some possible solutions:</p>
<ul>
<li>Add a canonical link tag to <code>&lt;head&gt;</code> for each
post</li>
<li>Generated two permalinks, making the old one redirects to the new
one by the first solution</li>
<li>Keep existing permalinks unchanged, use new format for new
posts</li>
</ul>
<p>To be safe, I choose the last one. So how to implement it?</p>
<h1 id="new-post-new-permalink-format-implementation">New Post New
Permalink Format Implementation</h1>
<p>The algorithm is straightforward: if the post creation time is after
<code>new_format_date</code>, post process the permalink and remove the
useless date string. We will try to write a fitler to implement it:
https://hexo.io/api/filter</p>
<blockquote><p>Hexo passes data to filters in sequence and the filters then modify
the data one after the other.</p>
<p>The first argument passed into each filter is <code>data</code>. The
<code>data</code> passed into the next filter can be modified by
returning a new value. If nothing is returned, the data remains
unmodified.</p>
</blockquote>
<p>After reading documentation, we found a filter called <a
target="_blank" rel="noopener" href="https://hexo.io/api/filter#post-permalink"># post-permalink</a>
which is used to determine the permalink of posts: <pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'post_permalink'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>  
 <span class="token comment">// ...  </span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></p>
<p>The document doesn't explain the input parameter in detail. Actually,
different filters have different input data structures. Maybe we need to
read the source code. Specifically, for this filter, <code>data</code>
is the permalink string like this:
<code>2021/03/21/migrateopsmanager.en/</code> .</p>
<p>Let's create a <code>scripts</code> folder in the Hexo root folder
and write a script <code>refinepermalink.js</code>: <pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> new_format_date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2021-05-01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

hexo<span class="token punctuation">.</span>extend<span class="token punctuation">.</span>filter<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'post_permalink'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">original_link</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> pivot <span class="token operator">=</span> original_link<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> date_str <span class="token operator">=</span> original_link<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> pivot<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>date_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> title <span class="token operator">=</span> original_link<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>pivot <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> result <span class="token operator">=</span> original_link<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>date <span class="token operator">></span> new_format_date<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        result <span class="token operator">=</span> title<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> date<span class="token punctuation">,</span> <span class="token string">'### Change permalink:'</span><span class="token punctuation">,</span> original_link<span class="token punctuation">,</span> <span class="token string">'-->'</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>
<p>The above implementation is self-explained. Execute
<code>hexo g</code> and then we are done: <pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ hexo g
INFO  Start processing
  2021-06-14T16:00:00.000Z ### Change permalink: 2021&#x2F;06&#x2F;15&#x2F;changepermalinkformat&#x2F; --&gt; changepermalinkformat&#x2F;
  2021-05-01T16:00:00.000Z ### Change permalink: 2021&#x2F;05&#x2F;02&#x2F;sqlservercleanupqueries&#x2F; --&gt; sqlservercleanupqueries&#x2F;
  2021-05-01T16:00:00.000Z ### Change permalink: 2021&#x2F;05&#x2F;02&#x2F;sqlservercleanupqueries.en&#x2F; --&gt; sqlservercleanupqueries.en&#x2F;
INFO  Files loaded in 1.99 s
...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>
<h1 id="references">References</h1>
<p><a
target="_blank" rel="noopener" href="https://blog.hvnobug.com/post/hexo-script#%E4%BB%80%E4%B9%88%E6%98%AFscripts">#
玩转Hexo的Scripts</a> <a
target="_blank" rel="noopener" href="https://dustinpfister.github.io/2018/01/03/hexo-plugins/">#
Getting started with Hexo Plug-ins, and scripts</a> <a
target="_blank" rel="noopener" href="https://improve.dk/redirecting-old-permalinks-on-statically-generated-blogs/">#
Redirecting Old Permalinks on Statically Generated Blogs</a></p>

    </div>

    
    
    
      
  <div class="popular-posts-header">Related Posts</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/changepermalinkformat/" rel="bookmark">Hexo修改永久链接格式并向后兼容</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/delayautoadsloading.en/" rel="bookmark">Delay Loading Google Auto Ads</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/delayautoadsloading/" rel="bookmark">延迟加载Google Auto Ads加速Hexo</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2019/12/11/migrategithubpages/" rel="bookmark">迁移Hexo博客到GitHub Pages</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/responsivehexonext/" rel="bookmark">提升Hexo NexT主题加载速度</a></div>
    </li>
  </ul>


    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/SEO/" rel="tag"># SEO</a>
              <a href="/tags/Hexo/" rel="tag"># Hexo</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/changepermalinkformat/" rel="prev" title="Hexo修改永久链接格式并向后兼容">
                  <i class="fa fa-chevron-left"></i> Hexo修改永久链接格式并向后兼容
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/simplestblogroll/" rel="next" title="最简单的Hexo友情链接页面定制">
                  最简单的Hexo友情链接页面定制 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="waline-comments"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">finisky</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script>

  




  


  <script class="next-config" data-name="leancloud_visitors" type="application/json">{"enable":true,"app_id":"dan6IxkRMXwPv0hks3I2pKEk-MdYXbMMI","app_key":"P2MOv4zxDuo7PiNelAkOk2aK","server_url":null,"security":false}</script>
  <script src="/js/third-party/statistics/lean-analytics.js"></script>


  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.1.4/es5/tex-mml-chtml.js","integrity":"sha256-ncNI9OXOS5Ek4tzVYiOMmN/KKCPZ6V0Cpv2P/zHntiA="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="waline" type="application/json">{"lang":"en","enable":true,"serverURL":"https://finiskycomments.vercel.app","placeholder":"Just go go","avatar":"mm","meta":["nick","mail","link"],"pageSize":10,"visitor":false,"comment_count":true,"requiredFields":[],"libUrl":"https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js","el":"#waline-comments","path":"/changepermalinkformat.en/"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() => 
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => {
    new Waline(CONFIG.waline);
  });
});
</script>
<script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body>
</html>
